{"version":3,"names":[],"mappings":"","sources":["modules/showStopPosition.js"],"sourcesContent":["export default function showStopPosition(e, map, markerLayers) {\r\n  let position = e.target.dataset.stopposition;\r\n  position = JSON.parse(`[${position}]`);\r\n\r\n  \r\n  \r\n  const busStopMarker = L.icon({\r\n    iconUrl: '../images/marker_busStop.svg',\r\n    iconSize: [26, 26],\r\n    iconAnchor: [13, 10],\r\n  });\r\n  \r\n  const busComingMarker = L.icon({\r\n    iconUrl: '../images/marker_busComing.svg',\r\n    iconSize: [26, 26],\r\n    iconAnchor: [13, 10],\r\n  });\r\n\r\n  const id = e.target.dataset.stopid;\r\n  const name = e.target.dataset.stopname;\r\n  const direction = e.target.dataset.direction;\r\n\r\n  let status = '';\r\n  if (direction === 'go') {\r\n    if (document.querySelector(`.item-badge-go-${id}`))\r\n      status = document.querySelector(`.item-badge-go-${id}`).textContent;\r\n  } else if (direction === 'back'){\r\n    if (document.querySelector(`.item-badge-back-${id}`))\r\n      status = document.querySelector(`.item-badge-back-${id}`).textContent;\r\n  }\r\n\r\n  let popupContent = '';\r\n  let marker = busStopMarker;\r\n\r\n  if(status === '進站中') {\r\n    popupContent = `\r\n      <div class=\"stop-popup bg-info text-white p-1 rounded-10\">\r\n        <img src=\"../images/popup_bus.svg\">\r\n        <p class=\"my-0\">${name}</p>\r\n        <strong>${status}</strong>\r\n      </div>\r\n      `;\r\n    marker = busComingMarker;\r\n  } else if (status === '即將進站') {\r\n    popupContent = `\r\n    <div class=\"stop-popup bg-info text-white p-1 rounded-10\">\r\n      <p class=\"my-0\">${name}</p>\r\n      <strong>${status}</strong>\r\n    </div>\r\n    `;\r\n    marker = busComingMarker;\r\n  } else if (status === '') {\r\n    popupContent = `\r\n    <div class=\"stop-popup bg-a9 text-white p-1 rounded-10\">\r\n      <p class=\"my-0\">${name}</p>\r\n    </div>\r\n    `;\r\n  } else {\r\n    popupContent = `\r\n    <div class=\"stop-popup bg-success text-white p-1 rounded-10\">\r\n      <p class=\"my-0\">${name}</p>\r\n      <strong>${status}</strong>\r\n    </div>\r\n    `;\r\n  }\r\n\r\n\r\n  const stopPoittion = L.marker(position, {\r\n    icon: marker,\r\n    minWidth: 0,\r\n    closeButton: false,\r\n    autoClose: true\r\n  })\r\n    .bindPopup(popupContent, {\r\n      closeButton: false\r\n    })\r\n    .on('add', evt => {\r\n      evt.target.openPopup();\r\n    });\r\n\r\n  map.setView(position);\r\n  markerLayers\r\n    .addLayer(stopPoittion)\r\n    .addTo(map);\r\n\r\n  \r\n}"],"file":"showStopPosition.js"}